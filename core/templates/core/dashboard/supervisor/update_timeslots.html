{% extends "core/dashboard/dashboard_base.html" %}
{% load crispy_forms_tags %}

{% block content %}
<div id="page-wrapper">
        {% if user.is_authenticated %}
        {% if user.is_supervisor %}
    <div class="row">
        <div class="col-lg-12">
            <h2 class="page-header">Appointments</h2>
        </div>
        <!-- /.col-lg-12 -->
    </div>
    <div class="row">
        <div class="col-lg-12">
            <div class="panel panel-success">
                <div class="panel-heading">
                    <b>Update Available Time Slots</b>
                </div>
                <!-- Panel Heading -->

                <div class="panel-body">
                    <div class="table-responsive">
                        <form action="{% url "save_days" %}" method="POST">
                            {% csrf_token %}
                            <div class="">
                                    <table class="table table-hover bg-info table-bordered table-striped">
                                    <thead class="thead-dark">
                                        <th class="pl-2">Day</th>
                                        <th class="pl-2" style="width:50%;">Update/Add Time Slot</th>
                                    </thead>
                                    {% for field in form2 %}
                                    <tr> 
                                    <td class="mb-4">
                                        <div class= "pl-2">
                                            {{ field.label }}
                                        </div>
                                    </td>
                                    <td>
                                     <div>
                                         {{ field }}
                                     </div>   
                                    <!-- <div class="input-group date time1" id="datetimepicker1" data-target-input="nearest">
                                        <div class="mr-3 float-right">
                                            <div class="input-group-append time2" data-target="#datetimepicker1" data-toggle="datetimepicker">
                                            {{ field }}
                                            <span class="input-group-text"><i class="fa fa-clock-o"></i></span>
                                            </div>
                                        </div>
                                        </td>
                                        <td>
                                        <span class="input-group-text tip">
                                            <i class="fa fa-close"></i>
                                            <span class="tiptext">
                                                Delete the saved timeslot
                                            </span>
                                        </span>
                                        <div class="clearfix"></div>
                                        </td>
                                    </div> -->
                                    </td>

                                    </tr>
                                    {% endfor %}
                                    </table>
                                    <div>
                                    <script>
                                    $(function () {
                                        $("#id_monday").datetimepicker({
                                            format:"H:i",
                                        });
                                        $("#id_tuesday").datetimepicker({
                                            format:"H:i",
                                        });                                        
                                        $("#id_wednesday").datetimepicker({
                                            format:"H:i",
                                        });
                                        $("#id_thursday").datetimepicker({
                                            format:"H:i",
                                        });                                        
                                        $("#id_friday").datetimepicker({
                                            format:"H:i",
                                        });
                                        $("#id_saturday").datetimepicker({
                                            format:"H:i",
                                        });
                                        $("#id_sunday").datetimepicker({
                                            format:"H:i",
                                        });
                                        $('#clock').click(function(){
                                            $('#id_date').datetimepicker('show');
                                        });
                                    });

                                    // $(function () {

                                    //   var count = 0;
                                    //   var id_count = 1;
                            
                                    //   //Django template loop to dynamically update timePicker
                                    //   {% for field in form2 %}
                            
                                    //     var id = "datetimepicker"+id_count;
                                    //     var dataTarget = "#datetimepicker"+id_count;
                                    //     console.log(id, dataTarget);    
                                    //     document.getElementsByClassName("time1")[count].setAttribute("id",id);
                                    //     document.getElementsByClassName("time2")[count].setAttribute("data-target",dataTarget);
                                    //     $(dataTarget).datetimepicker({
                                    //     format: 'HH:mm',
                                    //   });
                                    //   count += 1;
                                    //   id_count += 1;
                                    //   {% endfor %}
                            
                                    // });
                            
                                    </script>
                            <!-- <input type="submit" value="Sign Up"> -->
                            <button class="btn btn-outline btn-md btn-success pull-right" type="submit">Update</button>
                            <div class="clearfix"></div> 
                        </form>
                        
                        </div>
                
                    </div>
                </div>
                <!-- /.panel-body -->
            </div>
            <!-- /.panel -->
        </div>
        <!-- /.col-lg-12 -->
    </div>
    <!-- /.row -->
    {% endif %}
    {% endif %}
</div>

{% endblock %}